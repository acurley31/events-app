(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{110:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(7),c=n.n(i),l=n(15),o=(n(90),n(22)),u=n(39),s=n(34),d=n(69),m=n.n(d),f="".concat("http","://").concat("127.0.0.1",":").concat("8000","/api"),p=m.a.create({baseURL:f,timeout:1e3,headers:{"content-type":"application/json"},xsrfCookieName:"csrftoken",xsrfHeaderName:"X-CSRFToken"}),v=function(e){return"".concat("/events/").concat(e,"/")},E={getEvents:function(){return p.get("/events/")},addEvent:function(e){return p.post("/events/",e)},updateEvent:function(e){return p.patch(v(e.id),e)},deleteEvent:function(e){return p.delete(v(e))}},h={addEventSummary:function(){return p.post("/events/summaries/")}},b=function(e){return{type:"UPSERT_EVENT",data:e}},g=function(e){return e.reduce((function(e,t){return e[t.id]=t,e}),{})},y=function(e,t){return Object.keys(e).reduce((function(n,a){return a!==t.toString()&&(n[a]=e[a]),n}),{})},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_EVENTS":return g(t.data);case"UPSERT_EVENT":return Object(s.a)({},e,Object(u.a)({},t.data.id,t.data));case"DELETE_EVENT":return y(e,t.id);default:return e}},O=Object(o.c)({events:j}),N=n(70),S=function(e){return function(t){return function(n){console.groupCollapsed(n.type),console.log("The action: ",n);var a=t(n);return console.log("The result: ",e.getState()),console.groupEnd(),a}}},D=Object(o.a)(N.a,S),T={},k=Object(o.d)(O,T,D),x=n(40),C=n(41),F=n(45),_=n(47),w=n(17),L=n(25),B=function(){return function(e){e((function(e){return E.getEvents().then((function(t){return e({type:"ADD_EVENTS",data:t.data})})).catch((function(e){return e}))}))}},W=n(145),q=n(148),V=n(150),R=n(151),U=n(152),z=Object(W.a)((function(e){return{navLink:{marginLeft:"auto",color:e.palette.primary.contrastText}}})),A=function(e){var t=z();return r.a.createElement(q.a,{position:"sticky",variant:"outlined"},r.a.createElement(V.a,null,r.a.createElement(R.a,{variant:"h6"},"Events Tracker"),r.a.createElement(U.a,{component:w.c,to:"/events",className:t.navLink},"Events")))},I=n(72),J=n.n(I),P=n(73),Y=n.n(P),H=Object(W.a)((function(e){return{root:{display:"flex",alignItems:"center"},title:{marginRight:"auto"},actionButton:{marginLeft:e.spacing(2)}}})),M=function(e){var t=H();return r.a.createElement("header",{className:t.root},r.a.createElement(R.a,{variant:"h2",className:t.title},"Events List"),r.a.createElement(U.a,{variant:"outlined",size:"small",className:t.actionButton,onClick:function(e){e.preventDefault(),h.addEventSummary().then((function(e){var t=document.createElement("a");t.href=e.data.summary_file,t.download=!0,t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)}))},startIcon:r.a.createElement(J.a,null)},"Download Summary"),r.a.createElement(U.a,{variant:"contained",size:"small",color:"secondary",className:t.actionButton,component:w.b,to:"/events/new",startIcon:r.a.createElement(Y.a,null),disableElevation:!0},"Add Event"))},X=n(154),G=n(158),K=n(157),Q=n(153),Z=n(155),$=n(156),ee=n(111),te=n(159),ne=n(74),ae=n.n(ne),re=Object(W.a)((function(e){return{root:{marginTop:e.spacing(4)},table:{minWidth:650}}})),ie=Object(l.b)((function(e){var t=e.events;return{events:Object.keys(t).map((function(e){return t[e]}))}}))((function(e){var t=re();return 0===e.events.length?r.a.createElement("div",{className:t.root},r.a.createElement(R.a,{variant:"h6"},"No events found")):r.a.createElement(Q.a,{component:ee.a,variant:"outlined",className:t.root},r.a.createElement(X.a,{className:t.table},r.a.createElement(Z.a,null,r.a.createElement($.a,null,r.a.createElement(K.a,null,"Year"),r.a.createElement(K.a,null,"Event Type"),r.a.createElement(K.a,null,"Description"),r.a.createElement(K.a,{align:"right"},"Field 1"),r.a.createElement(K.a,{align:"right"},"Field 2"),r.a.createElement(K.a,{align:"right"},"Field 3"),r.a.createElement(K.a,{align:"right"},"Actions"))),r.a.createElement(G.a,null,e.events.map((function(e){return r.a.createElement($.a,{key:e.id,hover:!0},r.a.createElement(K.a,null,e.year),r.a.createElement(K.a,null,e.event_type),r.a.createElement(K.a,null,e.description),r.a.createElement(K.a,{align:"right"},e.field1),r.a.createElement(K.a,{align:"right"},e.field2),r.a.createElement(K.a,{align:"right"},e.field3),r.a.createElement(K.a,{align:"right"},r.a.createElement(te.a,{component:w.b,to:"/events/".concat(e.id),size:"small"},r.a.createElement(ae.a,{fontSize:"small"}))))})))))})),ce=Object(W.a)((function(e){return{root:{padding:e.spacing(8)}}})),le=Object(l.b)((function(e){var t=e.events;return{events:Object.keys(t).map((function(e){return t[e]}))}}))((function(e){var t=ce();return r.a.createElement("div",{className:t.root},r.a.createElement(M,null),r.a.createElement(ie,{items:e.events}))})),oe=n(4),ue=n(160),se=function(e){Object(_.a)(n,e);var t=Object(F.a)(n);function n(e){var a;return Object(x.a)(this,n),(a=t.call(this,e)).onSubmit=function(e){e.preventDefault(),a.props.onSubmit(a.state)},a.onDelete=function(e){e.preventDefault(),(a.props.data?a.props.data.id:null)&&a.props.onDelete&&a.props.onDelete(a.props.data)},e.data?a.state=Object(s.a)({},e.data):a.state={year:"",event_type:"",description:"",field1:"",field2:"",field3:""},a}return Object(C.a)(n,[{key:"componentDidUpdate",value:function(e){this.props.data&&e.data!==this.props.data&&this.setState(Object(s.a)({},this.props.data))}},{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement("form",{onSubmit:this.onSubmit,autoComplete:"off"},r.a.createElement(ue.a,{variant:"filled",fullWidth:!0,value:this.state.year,onChange:function(t){return e.setState({year:t.target.value})},label:"Year",required:!0,className:t.textField}),r.a.createElement(ue.a,{variant:"filled",fullWidth:!0,value:this.state.event_type,onChange:function(t){return e.setState({event_type:t.target.value})},label:"Event Type",required:!0,className:t.textField}),r.a.createElement(ue.a,{variant:"filled",fullWidth:!0,multiline:!0,rows:4,value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})},label:"Description",required:!0,className:t.textField}),r.a.createElement(ue.a,{variant:"filled",fullWidth:!0,value:this.state.field1,onChange:function(t){return e.setState({field1:t.target.value})},label:"Field 1",type:"number",required:!0,className:t.textField}),r.a.createElement(ue.a,{variant:"filled",fullWidth:!0,value:this.state.field2,onChange:function(t){return e.setState({field2:t.target.value})},label:"Field 2",type:"number",required:!0,className:t.textField}),r.a.createElement(ue.a,{variant:"filled",fullWidth:!0,value:this.state.field3,onChange:function(t){return e.setState({field3:t.target.value})},label:"Field 3",type:"number",required:!0,className:t.textField}),r.a.createElement("div",{className:t.actions},r.a.createElement(U.a,{variant:"outlined",color:"secondary",onClick:this.onDelete,disableElevation:!0,className:t.actionButton,disabled:!this.props.onDelete},"Delete"),r.a.createElement(U.a,{variant:"contained",color:"primary",type:"submit",disableElevation:!0,className:t.actionButton},"Save")))}}]),n}(a.Component),de=Object(oe.a)((function(e){return{textField:{marginTop:e.spacing(4)},actions:{marginTop:e.spacing(4),display:"flex",justifyContent:"flex-end"},actionButton:{marginLeft:e.spacing(2)}}}),{withTheme:!0})(se),me=Object(W.a)((function(e){return{root:{padding:e.spacing(8)}}})),fe=Object(L.f)(Object(l.b)((function(){return{}}),(function(e){return{addEvent:function(t){return e(function(e){return function(t){return E.addEvent(e).then((function(e){return t(b(e.data))})).catch((function(e){return e}))}}(t))}}}))((function(e){var t=me();return r.a.createElement("div",{className:t.root},r.a.createElement(R.a,{variant:"h2"},"New Event"),r.a.createElement(de,{onSubmit:function(t){e.addEvent(t),e.history.push("/events")}}))}))),pe=Object(W.a)((function(e){return{root:{padding:e.spacing(8)}}})),ve=Object(L.f)(Object(l.b)((function(e,t){return{data:e.events[t.match.params.id]}}),(function(e){return{updateEvent:function(t){return e(function(e){return function(t){return E.updateEvent(e).then((function(e){return t(b(e.data))})).catch((function(e){return e}))}}(t))},deleteEvent:function(t){return e(function(e){return function(t){return t({type:"DELETE_EVENT",id:e.id}),E.deleteEvent(e.id).catch((function(n){return t(b(e))}))}}(t))}}}))((function(e){var t=pe();return r.a.createElement("div",{className:t.root},r.a.createElement(R.a,{variant:"h2"},"Update Event"),r.a.createElement(de,{data:e.data,onSubmit:function(t){e.updateEvent(t),e.history.push("/events")},onDelete:function(t){e.deleteEvent(t),e.history.push("/events")}}))}))),Ee=function(e){Object(_.a)(n,e);var t=Object(F.a)(n);function n(){return Object(x.a)(this,n),t.apply(this,arguments)}return Object(C.a)(n,[{key:"componentDidMount",value:function(){this.props.dispatch(B())}},{key:"render",value:function(){return r.a.createElement(w.a,null,r.a.createElement(A,null),r.a.createElement(L.c,null,r.a.createElement(L.a,{exact:!0,path:"/events",component:le}),r.a.createElement(L.a,{exact:!0,path:"/events/new",component:fe}),r.a.createElement(L.a,{exact:!0,path:"/events/:id",component:ve})))}}]),n}(a.Component),he=Object(l.b)()(Ee);c.a.render(r.a.createElement(l.a,{store:k},r.a.createElement(he,null)),document.getElementById("root"))},81:function(e,t,n){e.exports=n(110)},90:function(e,t,n){}},[[81,1,2]]]);
//# sourceMappingURL=main.c8a30af6.chunk.js.map